{"version":3,"sources":["index.js"],"names":["App","state","loading","visible","searchText","searchedColumn","data","getColumnSearchProps","dataIndex","filterDropdown","setSelectedKeys","selectedKeys","confirm","clearFilters","style","padding","ref","node","searchInput","placeholder","value","onChange","e","target","onPressEnter","handleSearch","width","marginBottom","display","type","onClick","icon","size","marginRight","handleReset","filterIcon","filtered","color","undefined","onFilter","record","toString","toLowerCase","includes","onFilterDropdownVisibleChange","setTimeout","select","render","text","highlightStyle","backgroundColor","searchWords","autoEscape","textToHighlight","setState","columns","title","sorter","a","b","project_name","charCodeAt","showModal","href","id","project_id","filters","status","indexOf","Date","create_time","replace","labels","length","map","tag","key","users_found","users_manager","users_attend","fetch","params","console","log","reqwest","url","window","location","protocol","host","method","then","i","this","float","dataSource","rowKey","React","Component","pagination","extra","Header","Layout","Sider","Content","SiderDemo","main_show","collapsed","toggle","menuSelect","minHeight","height","border","position","left","top","trigger","collapsible","className","theme","mode","defaultSelectedKeys","onSelect","Item","background","margin","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.96b6dc11.chunk.js","sourcesContent":["\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'antd/dist/antd.css';\r\nimport './index.css';\r\nimport { Layout, Menu, Icon ,Table, Tag, Button, Input} from 'antd';\r\n\r\n\r\nimport Highlighter from 'react-highlight-words';\r\nimport reqwest from 'reqwest';\r\nimport moment from 'moment'; // 时间插件  \r\n\r\nclass App extends React.Component {\r\n  state = {\r\n    loading: false,\r\n    visible: false,\r\n    searchText: '',\r\n    searchedColumn: '',\r\n    data: [],\r\n  };\r\n  getColumnSearchProps = dataIndex => ({\r\n    filterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\r\n      <div style={{ padding: 8 }}>\r\n        <Input\r\n          ref={node => {\r\n            this.searchInput = node;\r\n          }}\r\n          placeholder={`Search ${dataIndex}`}\r\n          value={selectedKeys[0]}\r\n          onChange={e => setSelectedKeys(e.target.value ? [e.target.value] : [])}\r\n          onPressEnter={() => this.handleSearch(selectedKeys, confirm, dataIndex)}\r\n          style={{ width: 188, marginBottom: 8, display: 'block' }}\r\n        />\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => this.handleSearch(selectedKeys, confirm, dataIndex)}\r\n          icon=\"search\"\r\n          size=\"small\"\r\n          style={{ width: 90, marginRight: 8 }}\r\n        >\r\n          Search\r\n        </Button>\r\n        <Button onClick={() => this.handleReset(clearFilters)} size=\"small\" style={{ width: 90 }}>\r\n          Reset\r\n        </Button>\r\n      </div>\r\n    ),\r\n    filterIcon: filtered => (\r\n      <Icon type=\"search\" style={{ color: filtered ? '#1890ff' : undefined }} />\r\n    ),\r\n    onFilter: (value, record) =>\r\n      record[dataIndex]\r\n        .toString()\r\n        .toLowerCase()\r\n        .includes(value.toLowerCase()),\r\n    onFilterDropdownVisibleChange: visible => {\r\n      if (visible) {\r\n        setTimeout(() => this.searchInput.select());\r\n      }\r\n    },\r\n    render: text =>\r\n      this.state.searchedColumn === dataIndex ? (\r\n        <Highlighter\r\n          highlightStyle={{ backgroundColor: '#ffc069', padding: 0 }}\r\n          searchWords={[this.state.searchText]}\r\n          autoEscape\r\n          textToHighlight={text.toString()}\r\n        />\r\n      ) : (\r\n        text\r\n      ),\r\n  });\r\n\r\n  handleSearch = (selectedKeys, confirm, dataIndex) => {\r\n    confirm();\r\n    this.setState({\r\n      searchText: selectedKeys[0],\r\n      searchedColumn: dataIndex,\r\n    });\r\n  };\r\n\r\n  handleReset = clearFilters => {\r\n    clearFilters();\r\n    this.setState({ searchText: '' });\r\n  };\r\n  showModal(){\r\n    console.log()\r\n  }\r\n  columns = [\r\n    {\r\n      title: '',\r\n      dataIndex: 'project_id',\r\n      ...this.getColumnSearchProps('project_id'),\r\n      render: (text,record) => <p></p>,\r\n      width:1,\r\n    },\r\n    {\r\n      title: '项目名',\r\n      dataIndex: 'project_name',\r\n      sorter: (a, b) => a.project_name.charCodeAt() - b.project_name.charCodeAt(),\r\n      ...this.getColumnSearchProps('project_name'),\r\n      render: (text,record) => <a onClick={this.showModal} href={'display/'+record.id }>{record.project_id+'_'+text}</a>,\r\n    },\r\n    {\r\n      title: '状态',\r\n      dataIndex: 'status',\r\n      filters: [\r\n        {\r\n          text: '未开始',\r\n          value: '未开始',\r\n        },\r\n        {\r\n          text: '准备中',\r\n          value: '准备中',\r\n        },\r\n        {\r\n          text: '数据采集',\r\n          value: '数据采集',\r\n        },\r\n        {\r\n          text: '数据标注',\r\n          value: '数据标注',\r\n        },\r\n        {\r\n          text: '暂停',\r\n          value: '暂停',\r\n        },\r\n        {\r\n          text: '完结',\r\n          value: '完结',\r\n        },\r\n      ],\r\n      onFilter: (value, record) => record.status.indexOf(value) === 0,\r\n      sorter: (a, b) => a.status.charCodeAt() - b.status.charCodeAt(),\r\n    },\r\n    {\r\n      title: '创建日期',\r\n      dataIndex: 'create_time',\r\n      sorter: (a, b) =>  new Date(a.create_time.replace(/\\-/g, \"\\/\")) - new Date(b.create_time.replace(/\\-/g, \"\\/\")),\r\n    },\r\n    {\r\n      title: '标签',\r\n      dataIndex: 'labels',\r\n      sorter: (a, b) => a.labels.length - b.labels.length,\r\n      render: labels => (\r\n        <span>\r\n          {labels.map(tag => (\r\n            <Tag color=\"blue\" key={tag}>\r\n              {tag}\r\n            </Tag>\r\n          ))}\r\n        </span>\r\n      ),\r\n    },\r\n    {\r\n      title: '创建人',\r\n      dataIndex: 'users_found',\r\n      render: users_found => (\r\n        <span>\r\n          {users_found.map(tag => (\r\n            <Tag color=\"blue\" key={tag}>\r\n              {tag}\r\n            </Tag>\r\n          ))}\r\n        </span>\r\n        ),\r\n    },\r\n    {\r\n      title: '管理人',\r\n      dataIndex: 'users_manager',\r\n      render: users_manager => (\r\n        <span>\r\n          {users_manager.map(tag => (\r\n            <Tag color=\"blue\" key={tag}>\r\n              {tag}\r\n            </Tag>\r\n          ))}\r\n        </span>\r\n\r\n      ),    \r\n    },\r\n    {\r\n      title: '参与人',\r\n      dataIndex: 'users_attend',\r\n      render: users_attend => (\r\n        <span>\r\n          {users_attend.map(tag => (\r\n            <Tag color=\"blue\" key={tag}>\r\n              {tag}\r\n            </Tag>\r\n          ))}\r\n        </span>\r\n\r\n      ),    \r\n    },\r\n  ];\r\n\r\n  componentDidMount() {\r\n    this.fetch();\r\n  }\r\n\r\n  fetch = (params = {}) => {\r\n    console.log('params:', params);\r\n    this.setState({ loading: true });\r\n    reqwest({\r\n      url: window.location.protocol + \"//\"+window.location.host + '/aidsp/api/project/?format=json',\r\n      // url: 'http://127.0.0.1:8000/aidsp/api/project/?format=json',\r\n\r\n      method: 'get',\r\n    }).then(data => {\r\n      console.log(data[0].create_time)\r\n\r\n      for (let i in data){\r\n        console.log(i)\r\n        // data[i].create_time = data[i].create_time.substring(0,10);\r\n      }\r\n      console.log(data[0].create_time)\r\n      this.setState({data: data});\r\n      this.setState({ loading: false });\r\n\r\n    });\r\n  };\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Button href='newproject' type=\"primary\"  style={{float:'left'}}>新建项目</Button>\r\n        <br/>\r\n        <br/>\r\n        <Table columns={this.columns} \r\n        dataSource={this.state.data} \r\n        onChange={onChange} \r\n      rowKey={record => record.id}\r\n        loading={this.state.loading}/>\r\n     </div>\r\n)\r\n  }\r\n}\r\nfunction onChange(pagination, filters, sorter, extra) {\r\n  console.log('params', pagination, filters, sorter, extra);\r\n}\r\nconst { Header, Sider, Content } = Layout;\r\n\r\nclass SiderDemo extends React.Component {\r\n  state={\r\n    main_show :App,\r\n        collapsed: false,\r\n\r\n  }\r\n  toggle = () => {\r\n    this.setState({\r\n      collapsed: !this.state.collapsed,\r\n    });\r\n  };\r\n  menuSelect= e =>{\r\n    console.log(e.key)\r\n    if (e.key == 1){\r\n      this.setState({main_show:App})\r\n\r\n    }\r\n    if (e.key == 2){\r\n      this.setState({main_show:Layout})\r\n\r\n    }\r\n  }\r\n  render(){\r\n    return(\r\n        <Layout style={{ minHeight: '100vh',height:'100%',width:'100%',border: '1px',position:'fixed',left:0,top:0}}>\r\n          <Sider trigger={null} collapsible collapsed={this.state.collapsed} >\r\n            <div className=\"logo\" />\r\n            <Menu theme=\"dark\" mode=\"inline\" defaultSelectedKeys={['1']} onSelect={this.menuSelect}>\r\n              <Menu.Item key=\"1\">\r\n              <Icon type=\"appstore-o\" />\r\n                <span>项目</span>\r\n              </Menu.Item>\r\n              <Menu.Item key=\"2\">\r\n                <Icon type=\"video-camera\" />\r\n                <span>空白</span>\r\n              </Menu.Item>\r\n\r\n            </Menu>\r\n          </Sider>\r\n          <Layout>\r\n            <Header style={{ background: '#fff', padding: 0 }}>\r\n              <Icon\r\n                className=\"trigger\"\r\n                type={this.state.collapsed ? 'menu-unfold' : 'menu-fold'}\r\n                onClick={this.toggle}\r\n              />\r\n            </Header>\r\n            <Content\r\n              style={{\r\n                margin: '24px 16px',\r\n                padding: 24,\r\n                background: '#fff',\r\n                minHeight: 280,\r\n              }}\r\n            >\r\n              <this.state.main_show/>\r\n            </Content>\r\n          </Layout>\r\n        </Layout>)\r\n\r\n            \r\n    }\r\n}\r\nReactDOM.render(<SiderDemo />, document.getElementById('container'));\r\n"],"sourceRoot":""}