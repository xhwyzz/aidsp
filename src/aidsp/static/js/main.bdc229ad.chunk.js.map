{"version":3,"sources":["index.js"],"names":["App","state","loading","visible","searchText","searchedColumn","data","getColumnSearchProps","dataIndex","filterDropdown","setSelectedKeys","selectedKeys","confirm","clearFilters","style","padding","ref","node","searchInput","placeholder","value","onChange","e","target","onPressEnter","handleSearch","width","marginBottom","display","type","onClick","icon","size","marginRight","handleReset","filterIcon","filtered","color","undefined","onFilter","record","toString","toLowerCase","includes","onFilterDropdownVisibleChange","setTimeout","select","render","text","highlightStyle","backgroundColor","searchWords","autoEscape","textToHighlight","setState","columns","showModal","href","id","project_id","title","sorter","a","b","project_name","charCodeAt","filters","status","indexOf","Date","create_time","replace","labels","length","map","tag","key","users_found","users_manager","users_attend","fetch","params","console","log","reqwest","url","window","location","protocol","host","method","then","i","substring","this","dataSource","rowKey","React","Component","pagination","extra","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.bdc229ad.chunk.js","sourcesContent":["\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'antd/dist/antd.css';\r\nimport './index.css';\r\nimport { Table, Tag, Button, Input, Icon} from 'antd';\r\nimport Highlighter from 'react-highlight-words';\r\nimport reqwest from 'reqwest';\r\nimport moment from 'moment'; // 时间插件  \r\n\r\nclass App extends React.Component {\r\n  state = {\r\n    loading: false,\r\n    visible: false,\r\n    searchText: '',\r\n    searchedColumn: '',\r\n    data: [],\r\n  };\r\n  getColumnSearchProps = dataIndex => ({\r\n    filterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\r\n      <div style={{ padding: 8 }}>\r\n        <Input\r\n          ref={node => {\r\n            this.searchInput = node;\r\n          }}\r\n          placeholder={`Search ${dataIndex}`}\r\n          value={selectedKeys[0]}\r\n          onChange={e => setSelectedKeys(e.target.value ? [e.target.value] : [])}\r\n          onPressEnter={() => this.handleSearch(selectedKeys, confirm, dataIndex)}\r\n          style={{ width: 188, marginBottom: 8, display: 'block' }}\r\n        />\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => this.handleSearch(selectedKeys, confirm, dataIndex)}\r\n          icon=\"search\"\r\n          size=\"small\"\r\n          style={{ width: 90, marginRight: 8 }}\r\n        >\r\n          Search\r\n        </Button>\r\n        <Button onClick={() => this.handleReset(clearFilters)} size=\"small\" style={{ width: 90 }}>\r\n          Reset\r\n        </Button>\r\n      </div>\r\n    ),\r\n    filterIcon: filtered => (\r\n      <Icon type=\"search\" style={{ color: filtered ? '#1890ff' : undefined }} />\r\n    ),\r\n    onFilter: (value, record) =>\r\n      record[dataIndex]\r\n        .toString()\r\n        .toLowerCase()\r\n        .includes(value.toLowerCase()),\r\n    onFilterDropdownVisibleChange: visible => {\r\n      if (visible) {\r\n        setTimeout(() => this.searchInput.select());\r\n      }\r\n    },\r\n    render: text =>\r\n      this.state.searchedColumn === dataIndex ? (\r\n        <Highlighter\r\n          highlightStyle={{ backgroundColor: '#ffc069', padding: 0 }}\r\n          searchWords={[this.state.searchText]}\r\n          autoEscape\r\n          textToHighlight={text.toString()}\r\n        />\r\n      ) : (\r\n        text\r\n      ),\r\n  });\r\n\r\n  handleSearch = (selectedKeys, confirm, dataIndex) => {\r\n    confirm();\r\n    this.setState({\r\n      searchText: selectedKeys[0],\r\n      searchedColumn: dataIndex,\r\n    });\r\n  };\r\n\r\n  handleReset = clearFilters => {\r\n    clearFilters();\r\n    this.setState({ searchText: '' });\r\n  };\r\n  showModal(){\r\n    console.log()\r\n  }\r\n  columns = [\r\n    {\r\n      // ...this.getColumnSearchProps('project_name'),\r\n\r\n      render: (text,record) => <a onClick={this.showModal} href={'display/'+record.id }>{record.project_id+'_'+text}</a>,\r\n      title: '项目名',\r\n      dataIndex: 'project_name',\r\n      sorter: (a, b) => a.project_name.charCodeAt() - b.project_name.charCodeAt(),\r\n\r\n    },\r\n    {\r\n      title: '状态',\r\n      dataIndex: 'status',\r\n      filters: [\r\n        {\r\n          text: '未开始',\r\n          value: '未开始',\r\n        },\r\n        {\r\n          text: '准备中',\r\n          value: '准备中',\r\n        },\r\n        {\r\n          text: '数据采集',\r\n          value: '数据采集',\r\n        },\r\n        {\r\n          text: '数据标注',\r\n          value: '数据标注',\r\n        },\r\n        {\r\n          text: '暂停',\r\n          value: '暂停',\r\n        },\r\n        {\r\n          text: '完结',\r\n          value: '完结',\r\n        },\r\n      ],\r\n      onFilter: (value, record) => record.status.indexOf(value) === 0,\r\n      sorter: (a, b) => a.status.charCodeAt() - b.status.charCodeAt(),\r\n    },\r\n    {\r\n      title: '创建日期',\r\n      dataIndex: 'create_time',\r\n      sorter: (a, b) =>  new Date(a.create_time.replace(/\\-/g, \"\\/\")) - new Date(b.create_time.replace(/\\-/g, \"\\/\")),\r\n    },\r\n    {\r\n      title: '标签',\r\n      dataIndex: 'labels',\r\n      sorter: (a, b) => a.labels.length - b.labels.length,\r\n      render: labels => (\r\n        <span>\r\n          {labels.map(tag => (\r\n            <Tag color=\"blue\" key={tag}>\r\n              {tag}\r\n            </Tag>\r\n          ))}\r\n        </span>\r\n      ),\r\n    },\r\n    {\r\n      title: '创建人',\r\n      dataIndex: 'users_found',\r\n      render: users_found => (\r\n        <span>\r\n          {users_found.map(tag => (\r\n            <Tag color=\"blue\" key={tag}>\r\n              {tag}\r\n            </Tag>\r\n          ))}\r\n        </span>\r\n        ),\r\n    },\r\n    {\r\n      title: '管理人',\r\n      dataIndex: 'users_manager',\r\n      render: users_manager => (\r\n        <span>\r\n          {users_manager.map(tag => (\r\n            <Tag color=\"blue\" key={tag}>\r\n              {tag}\r\n            </Tag>\r\n          ))}\r\n        </span>\r\n\r\n      ),    \r\n    },\r\n    {\r\n      title: '参与人',\r\n      dataIndex: 'users_attend',\r\n      render: users_attend => (\r\n        <span>\r\n          {users_attend.map(tag => (\r\n            <Tag color=\"blue\" key={tag}>\r\n              {tag}\r\n            </Tag>\r\n          ))}\r\n        </span>\r\n\r\n      ),    \r\n    },\r\n  ];\r\n\r\n  componentDidMount() {\r\n    this.fetch();\r\n  }\r\n\r\n  fetch = (params = {}) => {\r\n    console.log('params:', params);\r\n    this.setState({ loading: true });\r\n    reqwest({\r\n      url: window.location.protocol + \"//\"+window.location.host + '/aidsp/api/project/?format=json',\r\n      // url: 'http://127.0.0.1:8000/aidsp/api/project/?format=json',\r\n\r\n      method: 'get',\r\n    }).then(data => {\r\n      console.log(data[0].create_time)\r\n\r\n      for (let i in data){\r\n        console.log(i)\r\n        data[i].create_time = data[i].create_time.substring(0,10);\r\n      }\r\n      console.log(data[0].create_time)\r\n      this.setState({data: data});\r\n      this.setState({ loading: false });\r\n\r\n    });\r\n  };\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Button href='newproject' type=\"primary\">新建项目</Button>\r\n        <br/>\r\n        <br/>\r\n        <Table columns={this.columns} \r\n        dataSource={this.state.data} \r\n        onChange={onChange} \r\n      rowKey={record => record.id}\r\n        loading={this.state.loading}/>\r\n     </div>\r\n)\r\n  }\r\n}\r\nfunction onChange(pagination, filters, sorter, extra) {\r\n  console.log('params', pagination, filters, sorter, extra);\r\n}\r\n\r\nReactDOM.render(<App />, document.getElementById('container'));\r\n"],"sourceRoot":""}